version: 2

models:
  - name: fct_active_users
    description: |
      Contains statistics about daily, weekly and monthly active users for each date. Statistics are stored per server.
      Telemetry data are used to identify user activity.

    columns:
      - name: activity_date
        description: The date for the measurement.
        tests:
          - not_null
      - name: server_id
        description: The server's unique id.
        tests:
          - not_null
      - name: daily_active_users
        description: The number of unique active users for the given server and date.
      - name: weekly_active_users
        description: The number of unique active users for the date and previous 6 days.
      - name: monthly_active_users
        description: The number of unique active users for the date and previous 29 days.
    tests:
      # A date should only appear once per server
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - activity_date
            - server_id
